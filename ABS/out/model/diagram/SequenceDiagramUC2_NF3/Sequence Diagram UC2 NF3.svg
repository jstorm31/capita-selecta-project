<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="454px" preserveAspectRatio="none" style="width:477px;height:454px;" version="1.1" viewBox="0 0 477 454" width="477px" zoomAndPan="magnify"><defs><filter height="300%" id="f3blpjley2ojl" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="199" x="139.75" y="23.5352">Sequence Diagram UC2 NF3</text><rect fill="#FFFFFF" filter="url(#f3blpjley2ojl)" height="164.4629" style="stroke: #000000; stroke-width: 2.0;" width="421.5" x="44" y="203.2188"/><rect fill="#FFFFFF" height="44.2656" style="stroke: none; stroke-width: 1.0;" width="421.5" x="44" y="279.1504"/><rect fill="#FFFFFF" height="44.2656" style="stroke: none; stroke-width: 1.0;" width="421.5" x="44" y="323.416"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="87" x2="87" y1="68.9766" y2="413.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="258.5" x2="258.5" y1="68.9766" y2="413.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="388.5" x2="388.5" y1="68.9766" y2="413.9922"/><rect fill="#FEFECE" filter="url(#f3blpjley2ojl)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="54" y="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="61" y="54.0234">Service</text><rect fill="#FEFECE" filter="url(#f3blpjley2ojl)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="54" y="412.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="61" y="433.5273">Service</text><rect fill="#FEFECE" filter="url(#f3blpjley2ojl)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="205.5" y="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="212.5" y="54.0234">TicketSystem</text><rect fill="#FEFECE" filter="url(#f3blpjley2ojl)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="205.5" y="412.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="212.5" y="433.5273">TicketSystem</text><rect fill="#FEFECE" filter="url(#f3blpjley2ojl)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="322.5" y="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="329.5" y="54.0234">PaymentProvider</text><rect fill="#FEFECE" filter="url(#f3blpjley2ojl)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="322.5" y="412.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="329.5" y="433.5273">PaymentProvider</text><polygon fill="#A80036" points="75,96.2871,85,100.2871,75,104.2871,79,100.2871" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="81" y1="100.2871" y2="100.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="10" y="95.5449">execute()</text><polygon fill="#A80036" points="247,125.5977,257,129.5977,247,133.5977,251,129.5977" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87" x2="253" y1="129.5977" y2="129.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="94" y="124.8555">order(count)</text><polygon fill="#A80036" points="377,154.9082,387,158.9082,377,162.9082,381,158.9082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="259" x2="383" y1="158.9082" y2="158.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="266" y="154.166">balance(card)</text><polygon fill="#A80036" points="270,184.2188,260,188.2188,270,192.2188,266,188.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="264" x2="388" y1="188.2188" y2="188.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="276" y="183.4766">balance</text><path d="M44,203.2188 L106,203.2188 L106,210.2188 L96,220.2188 L44,220.2188 L44,203.2188 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="164.4629" style="stroke: #000000; stroke-width: 2.0;" width="421.5" x="44" y="203.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="59" y="216.7871">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="217" x="121" y="215.8535">[balance &gt;= price &amp;&amp; ticketsAvailable]</text><polygon fill="#A80036" points="377,237.8398,387,241.8398,377,245.8398,381,241.8398" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="259" x2="383" y1="241.8398" y2="241.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="266" y="237.0977">pay(card)</text><polygon fill="#A80036" points="98,267.1504,88,271.1504,98,275.1504,94,271.1504" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92" x2="258" y1="271.1504" y2="271.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="104" y="266.4082">PDF with tickets</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="44" x2="465.5" y1="280.1504" y2="280.1504"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="95" x="49" y="290.7852">[balance &lt; price]</text><polygon fill="#A80036" points="98,311.416,88,315.416,98,319.416,94,315.416" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92" x2="258" y1="315.416" y2="315.416"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="104" y="310.6738">Exception (low balance)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="44" x2="465.5" y1="324.416" y2="324.416"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="100" x="49" y="335.0508">[!ticketsAvailable]</text><polygon fill="#A80036" points="98,355.6816,88,359.6816,98,363.6816,94,359.6816" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92" x2="258" y1="359.6816" y2="359.6816"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="104" y="354.9395">Exception (no tickets)</text><polygon fill="#A80036" points="14,391.9922,4,395.9922,14,399.9922,10,395.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="8" x2="86" y1="395.9922" y2="395.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="20" y="391.25">Response</text><!--
@startuml
title Sequence Diagram UC2 NF3

[-> Service: execute()
Service -> TicketSystem: order(count)
TicketSystem -> PaymentProvider: balance(card)
return balance
alt balance >= price && ticketsAvailable
    TicketSystem -> PaymentProvider: pay(card)
    TicketSystem - -> Service: PDF with tickets
else balance < price
    TicketSystem - -> Service: Exception (low balance)
else !ticketsAvailable
    TicketSystem - -> Service: Exception (no tickets)
end
[<- - Service: Response

@enduml

PlantUML version 1.2019.09(Mon Aug 26 18:19:51 CEST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_221-b11
Operating System: Mac OS X
OS Version: 10.15.1
Default Encoding: UTF-8
Language: en
Country: CZ
--></g></svg>