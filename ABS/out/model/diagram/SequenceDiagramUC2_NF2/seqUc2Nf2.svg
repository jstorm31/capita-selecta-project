<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="746px" preserveAspectRatio="none" style="width:950px;height:746px;" version="1.1" viewBox="0 0 950 746" width="950px" zoomAndPan="magnify"><defs><filter height="300%" id="f16lzr613l48cs" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="197" x="377.5" y="23.5352">Sequence diagram UC2 NF2</text><rect fill="#FFFFFF" filter="url(#f16lzr613l48cs)" height="353.7266" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="522.5" y="217.5293"/><rect fill="#FFFFFF" filter="url(#f16lzr613l48cs)" height="353.7266" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="616.5" y="217.5293"/><rect fill="#FFFFFF" filter="url(#f16lzr613l48cs)" height="353.7266" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="727.5" y="217.5293"/><rect fill="#FFFFFF" filter="url(#f16lzr613l48cs)" height="46.6211" style="stroke: #000000; stroke-width: 2.0;" width="270" x="669" y="379.082"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="37" x2="37" y1="68.9766" y2="706.498"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="140" x2="140" y1="68.9766" y2="706.498"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="252" x2="252" y1="68.9766" y2="706.498"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="333" x2="333" y1="68.9766" y2="706.498"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="429" x2="429" y1="68.9766" y2="706.498"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="527" x2="527" y1="68.9766" y2="706.498"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="621.5" x2="621.5" y1="68.9766" y2="706.498"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="732" x2="732" y1="68.9766" y2="706.498"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="862" x2="862" y1="68.9766" y2="706.498"/><rect fill="#FEFECE" filter="url(#f16lzr613l48cs)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="54" x="8" y="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="15" y="54.0234">Client</text><rect fill="#FEFECE" filter="url(#f16lzr613l48cs)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="54" x="8" y="705.498"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="15" y="726.0332">Client</text><rect fill="#FEFECE" filter="url(#f16lzr613l48cs)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="76" y="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="83" y="54.0234">ServiceEndpoint</text><rect fill="#FEFECE" filter="url(#f16lzr613l48cs)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="76" y="705.498"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="83" y="726.0332">ServiceEndpoint</text><rect fill="#FEFECE" filter="url(#f16lzr613l48cs)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="214" y="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="221" y="54.0234">KeyVault</text><rect fill="#FEFECE" filter="url(#f16lzr613l48cs)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="214" y="705.498"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="221" y="726.0332">KeyVault</text><rect fill="#FEFECE" filter="url(#f16lzr613l48cs)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="60" x="301" y="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="308" y="54.0234">Crypto</text><rect fill="#FEFECE" filter="url(#f16lzr613l48cs)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="60" x="301" y="705.498"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="308" y="726.0332">Crypto</text><rect fill="#FEFECE" filter="url(#f16lzr613l48cs)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="375" y="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="382" y="54.0234">LoadBalancer</text><rect fill="#FEFECE" filter="url(#f16lzr613l48cs)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="375" y="705.498"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="382" y="726.0332">LoadBalancer</text><rect fill="#FEFECE" filter="url(#f16lzr613l48cs)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="494" y="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="501" y="54.0234">Worker</text><rect fill="#FEFECE" filter="url(#f16lzr613l48cs)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="494" y="705.498"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="501" y="726.0332">Worker</text><rect fill="#FEFECE" filter="url(#f16lzr613l48cs)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="588.5" y="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="595.5" y="54.0234">Service</text><rect fill="#FEFECE" filter="url(#f16lzr613l48cs)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="588.5" y="705.498"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="595.5" y="726.0332">Service</text><rect fill="#FEFECE" filter="url(#f16lzr613l48cs)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="679" y="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="686" y="54.0234">TicketSystem</text><rect fill="#FEFECE" filter="url(#f16lzr613l48cs)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="679" y="705.498"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="686" y="726.0332">TicketSystem</text><rect fill="#FEFECE" filter="url(#f16lzr613l48cs)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="796" y="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="803" y="54.0234">PaymentProvider</text><rect fill="#FEFECE" filter="url(#f16lzr613l48cs)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="796" y="705.498"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="803" y="726.0332">PaymentProvider</text><rect fill="#FFFFFF" filter="url(#f16lzr613l48cs)" height="353.7266" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="522.5" y="217.5293"/><rect fill="#FFFFFF" filter="url(#f16lzr613l48cs)" height="353.7266" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="616.5" y="217.5293"/><rect fill="#FFFFFF" filter="url(#f16lzr613l48cs)" height="353.7266" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="727.5" y="217.5293"/><polygon fill="#A80036" points="128,96.2871,138,100.2871,128,104.2871,132,100.2871" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="37" x2="134" y1="100.2871" y2="100.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="44" y="95.5449">run()</text><polygon fill="#A80036" points="240.5,125.5977,250.5,129.5977,240.5,133.5977,244.5,129.5977" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="140" x2="246.5" y1="129.5977" y2="129.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="147" y="124.8555">getKey()</text><polygon fill="#A80036" points="321,154.9082,331,158.9082,321,162.9082,325,158.9082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="140" x2="327" y1="158.9082" y2="158.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="147" y="154.166">encrypt(key, data)</text><polygon fill="#A80036" points="417.5,184.2188,427.5,188.2188,417.5,192.2188,421.5,188.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="140" x2="423.5" y1="188.2188" y2="188.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="147" y="183.4766">invokeService()</text><polygon fill="#A80036" points="510.5,213.5293,520.5,217.5293,510.5,221.5293,514.5,217.5293" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="429.5" x2="516.5" y1="217.5293" y2="217.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="436.5" y="212.7871">process()</text><polygon fill="#A80036" points="604.5,242.8398,614.5,246.8398,604.5,250.8398,608.5,246.8398" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="532.5" x2="610.5" y1="246.8398" y2="246.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="539.5" y="242.0977">execute()</text><polygon fill="#A80036" points="715.5,272.1504,725.5,276.1504,715.5,280.1504,719.5,276.1504" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="626.5" x2="721.5" y1="276.1504" y2="276.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="633.5" y="271.4082">order(count)</text><polygon fill="#A80036" points="263.5,301.4609,253.5,305.4609,263.5,309.4609,259.5,305.4609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="257.5" x2="726.5" y1="305.4609" y2="305.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="269.5" y="300.7188">getKey()</text><polygon fill="#A80036" points="344,330.7715,334,334.7715,344,338.7715,340,334.7715" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="338" x2="726.5" y1="334.7715" y2="334.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="350" y="330.0293">decrypt(key, data)</text><polygon fill="#A80036" points="850.5,360.082,860.5,364.082,850.5,368.082,854.5,364.082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="737.5" x2="856.5" y1="364.082" y2="364.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="744.5" y="359.3398">getBalance()</text><path d="M669,379.082 L731,379.082 L731,386.082 L721,396.082 L669,396.082 L669,379.082 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.6211" style="stroke: #000000; stroke-width: 2.0;" width="270" x="669" y="379.082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="684" y="392.6504">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="104" x="746" y="391.7168">[sufficent amount]</text><polygon fill="#A80036" points="850.5,413.7031,860.5,417.7031,850.5,421.7031,854.5,417.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="737.5" x2="856.5" y1="417.7031" y2="417.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="744.5" y="412.9609">pay()</text><polygon fill="#A80036" points="263.5,450.0137,253.5,454.0137,263.5,458.0137,259.5,454.0137" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="257.5" x2="726.5" y1="454.0137" y2="454.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="269.5" y="449.2715">getKey()</text><polygon fill="#A80036" points="344,479.3242,334,483.3242,344,487.3242,340,483.3242" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="338" x2="726.5" y1="483.3242" y2="483.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="350" y="478.582">encrypt(key, data)</text><polygon fill="#A80036" points="637.5,508.6348,627.5,512.6348,637.5,516.6348,633.5,512.6348" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="631.5" x2="726.5" y1="512.6348" y2="512.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="643.5" y="507.8926">Response</text><polygon fill="#A80036" points="543.5,537.9453,533.5,541.9453,543.5,545.9453,539.5,541.9453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="537.5" x2="615.5" y1="541.9453" y2="541.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="549.5" y="537.2031">Response</text><polygon fill="#A80036" points="440.5,567.2559,430.5,571.2559,440.5,575.2559,436.5,571.2559" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="434.5" x2="526.5" y1="571.2559" y2="571.2559"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="446.5" y="566.5137">Response</text><polygon fill="#A80036" points="151,596.5664,141,600.5664,151,604.5664,147,600.5664" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="145" x2="428.5" y1="600.5664" y2="600.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="157" y="595.8242">Response</text><polygon fill="#A80036" points="240.5,625.877,250.5,629.877,240.5,633.877,244.5,629.877" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="140" x2="246.5" y1="629.877" y2="629.877"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="147" y="625.1348">getKey()</text><polygon fill="#A80036" points="321,655.1875,331,659.1875,321,663.1875,325,659.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="140" x2="327" y1="659.1875" y2="659.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="147" y="654.4453">decrypt(key, Response)</text><polygon fill="#A80036" points="48,684.498,38,688.498,48,692.498,44,688.498" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="42" x2="139" y1="688.498" y2="688.498"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="54" y="683.7559">Response</text><!--
@startuml seqUc2Nf2
title Sequence diagram UC2 NF2


Client -> ServiceEndpoint: run()

ServiceEndpoint -> KeyVault: getKey()
ServiceEndpoint -> Crypto: encrypt(key, data)
ServiceEndpoint -> LoadBalancer: invokeService()
LoadBalancer -> Worker: process()
activate Worker
activate Service
activate TicketSystem

Worker -> Service: execute()
Service -> TicketSystem: order(count)

TicketSystem -> KeyVault: getKey()
TicketSystem -> Crypto: decrypt(key, data)

TicketSystem -> PaymentProvider: getBalance()
alt sufficent amount
    TicketSystem -> PaymentProvider: pay()
end

TicketSystem -> KeyVault: getKey()
TicketSystem -> Crypto: encrypt(key, data)

Service <- - TicketSystem: Response
Worker <- - Service: Response
return Response

deactivate Worker
deactivate Service
deactivate TicketSystem

ServiceEndpoint <- - LoadBalancer: Response
ServiceEndpoint -> KeyVault: getKey()
ServiceEndpoint -> Crypto: decrypt(key, Response)

Client <- - ServiceEndpoint: Response
@enduml

PlantUML version 1.2019.09(Mon Aug 26 18:19:51 CEST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_221-b11
Operating System: Mac OS X
OS Version: 10.15.1
Default Encoding: UTF-8
Language: en
Country: CZ
--></g></svg>